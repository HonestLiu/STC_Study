C51 COMPILER V9.60.7.0   MAIN                                                              06/23/2024 09:30:32 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\AppData\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listi
                    -ngs\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "Config.h"
   2          #include "GPIO.h"
   3          #include "Delay.h"
   4          
   5          #define LED_SW P45
   6          
   7          #define LED4 P14
   8          #define LED3 P15
   9          #define LED8 P20
  10          #define LED7 P21
  11          #define LED6 P22
  12          #define LED5 P23
  13          #define LED2 P26
  14          #define LED1 P27
  15          
  16          #define HIGH 1
  17          #define LOW 0
  18          
  19          /* 初始化GPIO */
  20          void gpio_config()
  21          {
  22   1          GPIO_InitTypeDef gpio_config_struct = {0};
  23   1          // 初始化SW引脚-> 电源总开关
  24   1          gpio_config_struct.Mode = GPIO_OUT_PP; // 需要高电平控制三极管，故使用推挽输出
  25   1          gpio_config_struct.Pin = GPIO_Pin_5;
  26   1          GPIO_Inilize(GPIO_P4, &gpio_config_struct);
  27   1      
  28   1          // 初始化LED
  29   1          gpio_config_struct.Mode = GPIO_PullUp;
  30   1          gpio_config_struct.Pin = GPIO_Pin_4 | GPIO_Pin_5;
  31   1          GPIO_Inilize(GPIO_P1, &gpio_config_struct);
  32   1      
  33   1          gpio_config_struct.Pin = GPIO_Pin_0 | GPIO_Pin_1 | GPIO_Pin_2 | GPIO_Pin_3 | GPIO_Pin_6 | GPIO_Pin_7;
  34   1          GPIO_Inilize(GPIO_P2, &gpio_config_struct);
  35   1      }
  36          
  37          void main()
  38          {
  39   1          char i;
  40   1          gpio_config();
  41   1      
  42   1          /**
  43   1           * @note Sw:LED灯组总开关，连接一个PNP三极管，作无接触开关，输出高电平时闭
             -合，输出低电平时导通
  44   1           **/
  45   1          LED_SW = LOW; // 打开总开关
  46   1      
  47   1          /**
  48   1           * @note LED接口，端口另一侧为SW控制的VCC，端口处输出低电平即可点亮LED
  49   1           */
  50   1      
  51   1          // 初始化所有LED灯->点亮0 熄灭 1
  52   1          LED1 = 0;
  53   1          LED2 = 0;
C51 COMPILER V9.60.7.0   MAIN                                                              06/23/2024 09:30:32 PAGE 2   

  54   1          LED3 = 0;
  55   1          LED4 = 0;
  56   1          LED5 = 0;
  57   1          LED6 = 0;
  58   1          LED7 = 0;
  59   1          LED8 = 0;
  60   1      
  61   1          while (1)
  62   1          {
  63   2              /*for (i = 8; i < 0; i--)
  64   2              {
  65   2                  i == 0 ? (LED1 = 0) : (LED1 = 1);
  66   2      
  67   2              }*/
  68   2              /* 利用for循环，依次点亮LED后依次关闭LED */
  69   2              for (i = 0; i < 8; i++)
  70   2              {
  71   3                  LED1 = (i == 0 ? 0 : 1);
  72   3                  LED2 = (i == 1 ? 0 : 1);
  73   3                  LED3 = (i == 2 ? 0 : 1);
  74   3                  LED4 = (i == 3 ? 0 : 1);
  75   3                  LED5 = (i == 4 ? 0 : 1);
  76   3                  LED6 = (i == 5 ? 0 : 1);
  77   3                  LED7 = (i == 6 ? 0 : 1);
  78   3                  LED8 = (i == 7 ? 0 : 1);
  79   3                  delay_ms(100);
  80   3              }
  81   2      
  82   2              for (i = 7; i >= 0; i--)
  83   2              {
  84   3                  LED1 = (i == 0 ? 0 : 1);
  85   3                  LED2 = (i == 1 ? 0 : 1);
  86   3                  LED3 = (i == 2 ? 0 : 1);
  87   3                  LED4 = (i == 3 ? 0 : 1);
  88   3                  LED5 = (i == 4 ? 0 : 1);
  89   3                  LED6 = (i == 5 ? 0 : 1);
  90   3                  LED7 = (i == 6 ? 0 : 1);
  91   3                  LED8 = (i == 7 ? 0 : 1);
  92   3                  delay_ms(100);
  93   3              }
  94   2          }
  95   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    300    ----
   CONSTANT SIZE    =      2    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
